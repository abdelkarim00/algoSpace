<section class="project-detail-section">
    <div class="container project-content">
        <h1>Countdown Timer & Stopwatch</h1>
        <p class="description">Set a precise countdown for any event or use the built-in stopwatch for accurate timekeeping. Simple, intuitive, and visually clean.</p>

        <div class="timer-card">
            <div class="mode-selector">
                <button id="countdownModeBtn" class="mode-btn active">Countdown Timer</button>
                <button id="stopwatchModeBtn" class="mode-btn">Stopwatch</button>
            </div>

            <div id="countdownPanel" class="timer-panel active">
                <div class="countdown-inputs">
                    <div class="input-group">
                        <label for="hoursInput">Hours</label>
                        <input type="number" id="hoursInput" min="0" max="99" value="0">
                    </div>
                    <div class="input-group">
                        <label for="minutesInput">Minutes</label>
                        <input type="number" id="minutesInput" min="0" max="59" value="5">
                    </div>
                    <div class="input-group">
                        <label for="secondsInput">Seconds</label>
                        <input type="number" id="secondsInput" min="0" max="59" value="0">
                    </div>
                </div>
                <div class="display-area">
                    <span id="countdownDisplay" class="timer-display">00:05:00</span>
                </div>
                <div class="timer-controls">
                    <button id="countdownStartBtn" class="btn primary-btn"><i class="fas fa-play"></i> Start</button>
                    <button id="countdownPauseBtn" class="btn secondary-btn" disabled><i class="fas fa-pause"></i> Pause</button>
                    <button id="countdownResetBtn" class="btn tertiary-btn" disabled><i class="fas fa-redo-alt"></i> Reset</button>
                </div>
            </div>

            <div id="stopwatchPanel" class="timer-panel">
                <div class="display-area">
                    <span id="stopwatchDisplay" class="timer-display">00:00:00.00</span>
                </div>
                <div class="timer-controls">
                    <button id="stopwatchStartBtn" class="btn primary-btn"><i class="fas fa-play"></i> Start</button>
                    <button id="stopwatchStopBtn" class="btn secondary-btn" disabled><i class="fas fa-stop"></i> Stop</button>
                    <button id="stopwatchResetBtn" class="btn tertiary-btn" disabled><i class="fas fa-redo-alt"></i> Reset</button>
                </div>
            </div>
        </div>
        
        <div class="timer-info">
            <h3>How to Use</h3>
            <h4>Countdown Timer:</h4>
            <ul>
                <li>Enter your desired hours, minutes, and seconds.</li>
                <li>Click "Start" to begin the countdown.</li>
                <li>"Pause" temporarily stops the timer, "Reset" brings it back to the initial set time.</li>
                <li>An alert will notify you when the time runs out!</li>
            </ul>
            <h4>Stopwatch:</h4>
            <ul>
                <li>Click "Start" to begin timing.</li>
                <li>"Stop" pauses the stopwatch, "Reset" clears the time.</li>
            </ul>
        </div>
    </div>
</section>

<style>
    /* Specific styles for the countdown timer page */
    .project-detail-section {
        padding: 40px 0 80px;
        background-color: var(--background-light);
        color: var(--text-light);
    }

    body.dark-theme .project-detail-section {
        background-color: var(--background-dark);
        color: var(--text-dark);
    }

    .project-content {
        max-width: 800px;
        text-align: center;
    }

    .project-content h1 {
        font-size: 2.8rem;
        margin-bottom: 20px;
        color: var(--primary-color);
    }

    .project-content .description {
        font-size: 1.1rem;
        margin-bottom: 40px;
        line-height: 1.8;
        color: var(--text-light);
    }

    body.dark-theme .project-content .description {
        color: var(--text-dark);
    }

    .timer-card {
        background-color: var(--card-background-light);
        padding: 40px;
        border-radius: var(--border-radius-base);
        box-shadow: 0 5px 20px var(--shadow-color-light);
        display: flex;
        flex-direction: column;
        gap: 25px;
        align-items: center;
        margin-bottom: 40px;
        border: 1px solid var(--border-color-light);
        transition: background-color var(--transition-speed), border-color var(--transition-speed), box-shadow var(--transition-speed);
    }

    body.dark-theme .timer-card {
        background-color: var(--card-background-dark);
        border-color: var(--border-color-dark);
        box-shadow: 0 5px 20px var(--shadow-color-dark);
    }

    .mode-selector {
        display: flex;
        justify-content: center;
        margin-bottom: 25px;
        width: 100%;
    }

    .mode-btn {
        background-color: var(--background-light);
        border: 1px solid var(--border-color-light);
        color: var(--text-light);
        padding: 10px 20px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all var(--transition-speed);
    }

    body.dark-theme .mode-btn {
        background-color: var(--background-dark);
        border-color: var(--border-color-dark);
        color: var(--text-dark);
    }

    .mode-btn:first-child {
        border-top-left-radius: var(--border-radius-base);
        border-bottom-left-radius: var(--border-radius-base);
        border-right: none;
    }
    .mode-btn:last-child {
        border-top-right-radius: var(--border-radius-base);
        border-bottom-right-radius: var(--border-radius-base);
        border-left: none;
    }

    .mode-btn.active {
        background-color: var(--primary-color);
        color: #fff;
        border-color: var(--primary-color);
    }
    .mode-btn.active:hover {
        background-color: var(--primary-color); /* No change on hover when active */
        color: #fff;
    }

    .mode-btn:hover:not(.active) {
        background-color: var(--border-color-light);
        color: var(--primary-color);
    }
    body.dark-theme .mode-btn:hover:not(.active) {
        background-color: var(--border-color-dark);
    }

    .timer-panel {
        display: none; /* Hidden by default */
        width: 100%;
        flex-direction: column;
        align-items: center;
        gap: 25px;
    }

    .timer-panel.active {
        display: flex; /* Shown when active */
    }

    .countdown-inputs {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
    }

    .countdown-inputs .input-group {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .countdown-inputs label {
        font-size: 0.9rem;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--text-light);
    }
    body.dark-theme .countdown-inputs label {
        color: var(--text-dark);
    }

    .countdown-inputs input[type="number"] {
        width: 70px; /* Adjust width for time inputs */
        padding: 12px 0;
        border: 1px solid var(--border-color-light);
        border-radius: var(--border-radius-base);
        font-size: 1.1rem;
        text-align: center;
        background-color: #fff;
        color: var(--text-light);
        transition: border-color 0.2s, background-color 0.2s, color 0.2s;
    }

    body.dark-theme .countdown-inputs input[type="number"] {
        background-color: var(--background-dark);
        border-color: var(--border-color-dark);
        color: var(--text-dark);
    }

    .countdown-inputs input[type="number"]:focus {
        border-color: var(--primary-color);
        outline: none;
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
    }

    .timer-display {
        font-family: 'Inter', sans-serif; /* Keep consistent font */
        font-size: 4rem;
        font-weight: 700;
        color: var(--primary-color);
        background: var(--background-light);
        padding: 20px 30px;
        border-radius: var(--border-radius-base);
        min-width: 300px; /* Ensure display area is decent size */
        display: inline-block; /* Allow padding */
        box-shadow: inset 0 1px 5px var(--shadow-color-light);
        transition: background-color var(--transition-speed), box-shadow var(--transition-speed);
    }

    body.dark-theme .timer-display {
        background: var(--background-dark);
        box-shadow: inset 0 1px 5px var(--shadow-color-dark);
    }

    .timer-controls {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
        width: 100%;
        max-width: 450px; /* Limit button row width */
    }

    .timer-controls .btn {
        flex: 1 1 auto; /* Allow buttons to grow/shrink */
        min-width: 120px; /* Minimum width for buttons */
        padding: 12px 20px;
        font-size: 1rem;
        text-transform: capitalize; /* Use capitalize for buttons */
    }

    .secondary-btn {
        background-color: #6c757d;
        color: #fff;
        border: 2px solid #6c757d;
    }
    .secondary-btn:hover:not(:disabled) {
        background-color: #5a6268;
        border-color: #5a6268;
    }

    .tertiary-btn {
        background-color: #dc3545; /* Red for reset/stop */
        color: #fff;
        border: 2px solid #dc3545;
    }
    .tertiary-btn:hover:not(:disabled) {
        background-color: #c82333;
        border-color: #c82333;
    }

    .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background-color: #e0e0e0;
        border-color: #e0e0e0;
        color: #a0a0a0;
    }
    body.dark-theme .btn:disabled {
        background-color: #555;
        border-color: #555;
        color: #999;
    }


    .timer-info {
        margin-top: 60px;
        padding: 30px;
        background-color: var(--card-background-light);
        border-radius: var(--border-radius-base);
        box-shadow: 0 2px 10px var(--shadow-color-light);
        text-align: left;
        border: 1px solid var(--border-color-light);
        transition: background-color var(--transition-speed), border-color var(--transition-speed), box-shadow var(--transition-speed);
    }

    body.dark-theme .timer-info {
        background-color: var(--card-background-dark);
        border-color: var(--border-color-dark);
        box-shadow: 0 2px 10px var(--shadow-color-dark);
    }

    .timer-info h3 {
        font-size: 1.8rem;
        color: var(--primary-color);
        margin-bottom: 20px;
        text-align: center;
        border-bottom: 1px solid var(--border-color-light);
        padding-bottom: 10px;
        transition: border-color var(--transition-speed);
    }
    body.dark-theme .timer-info h3 {
        border-color: var(--border-color-dark);
    }
    .timer-info h4 {
        font-size: 1.3rem;
        margin-top: 25px;
        margin-bottom: 10px;
        color: var(--text-light);
    }
    body.dark-theme .timer-info h4 {
        color: var(--text-dark);
    }

    .timer-info ul {
        list-style-type: disc;
        padding-left: 25px;
    }

    .timer-info li {
        font-size: 1rem;
        line-height: 1.7;
        margin-bottom: 8px;
        color: var(--text-light);
    }
    body.dark-theme .timer-info li {
        color: var(--text-dark);
    }

    /* Media queries for responsiveness */
    @media (max-width: 600px) {
        .timer-card {
            padding: 25px;
        }

        .project-content h1 {
            font-size: 2.2rem;
        }

        .project-content .description {
            font-size: 1rem;
        }

        .countdown-inputs {
            flex-direction: column;
            gap: 15px;
        }

        .countdown-inputs input[type="number"] {
            width: 100px;
        }

        .timer-display {
            font-size: 3rem;
            min-width: unset;
            padding: 15px 20px;
        }

        .timer-controls {
            flex-direction: column;
            gap: 10px;
        }

        .timer-controls .btn {
            width: 100%;
            min-width: unset;
        }

        .timer-info {
            padding: 20px;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Mode Switching ---
        const countdownModeBtn = document.getElementById('countdownModeBtn');
        const stopwatchModeBtn = document.getElementById('stopwatchModeBtn');
        const countdownPanel = document.getElementById('countdownPanel');
        const stopwatchPanel = document.getElementById('stopwatchPanel');

        function switchMode(mode) {
            if (mode === 'countdown') {
                countdownPanel.classList.add('active');
                stopwatchPanel.classList.remove('active');
                countdownModeBtn.classList.add('active');
                stopwatchModeBtn.classList.remove('active');
                // Ensure stopwatch is reset if switching away
                resetStopwatch();
            } else { // stopwatch
                countdownPanel.classList.remove('active');
                stopwatchPanel.classList.add('active');
                countdownModeBtn.classList.remove('active');
                stopwatchModeBtn.classList.add('active');
                // Ensure countdown is reset if switching away
                resetCountdown();
            }
        }

        countdownModeBtn.addEventListener('click', () => switchMode('countdown'));
        stopwatchModeBtn.addEventListener('click', () => switchMode('stopwatch'));

        // --- Countdown Timer Logic ---
        const hoursInput = document.getElementById('hoursInput');
        const minutesInput = document.getElementById('minutesInput');
        const secondsInput = document.getElementById('secondsInput');
        const countdownDisplay = document.getElementById('countdownDisplay');
        const countdownStartBtn = document.getElementById('countdownStartBtn');
        const countdownPauseBtn = document.getElementById('countdownPauseBtn');
        const countdownResetBtn = document.getElementById('countdownResetBtn');

        let countdownInterval;
        let totalSecondsRemaining; // Stores the remaining seconds for countdown
        let initialCountdownSeconds; // Stores the initially set seconds for reset

        function updateCountdownDisplay() {
            const h = Math.floor(totalSecondsRemaining / 3600);
            const m = Math.floor((totalSecondsRemaining % 3600) / 60);
            const s = totalSecondsRemaining % 60;
            countdownDisplay.textContent = 
                `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
        }

        function startCountdown() {
            const hours = parseInt(hoursInput.value) || 0;
            const minutes = parseInt(minutesInput.value) || 0;
            const seconds = parseInt(secondsInput.value) || 0;

            // If starting for the first time or after reset
            if (totalSecondsRemaining === undefined || totalSecondsRemaining === 0) {
                initialCountdownSeconds = (hours * 3600) + (minutes * 60) + seconds;
                totalSecondsRemaining = initialCountdownSeconds;
                if (totalSecondsRemaining <= 0) {
                    alert('Please set a duration greater than zero for the countdown!');
                    return;
                }
            }
            
            updateCountdownDisplay(); // Update display immediately
            countdownStartBtn.disabled = true;
            countdownPauseBtn.disabled = false;
            countdownResetBtn.disabled = false;
            hoursInput.disabled = true;
            minutesInput.disabled = true;
            secondsInput.disabled = true;

            countdownInterval = setInterval(() => {
                totalSecondsRemaining--;
                updateCountdownDisplay();

                if (totalSecondsRemaining <= 0) {
                    clearInterval(countdownInterval);
                    alert('Countdown Finished!');
                    resetCountdown(); // Automatically reset after finishing
                }
            }, 1000);
        }

        function pauseCountdown() {
            clearInterval(countdownInterval);
            countdownStartBtn.disabled = false;
            countdownPauseBtn.disabled = true;
        }

        function resetCountdown() {
            clearInterval(countdownInterval);
            totalSecondsRemaining = initialCountdownSeconds; // Reset to initial value
            if (initialCountdownSeconds === undefined) { // If never started
                hoursInput.value = '0';
                minutesInput.value = '5';
                secondsInput.value = '0';
            }
            updateCountdownDisplay();
            countdownStartBtn.disabled = false;
            countdownPauseBtn.disabled = true;
            countdownResetBtn.disabled = true;
            hoursInput.disabled = false;
            minutesInput.disabled = false;
            secondsInput.disabled = false;
        }

        countdownStartBtn.addEventListener('click', startCountdown);
        countdownPauseBtn.addEventListener('click', pauseCountdown);
        countdownResetBtn.addEventListener('click', resetCountdown);
        hoursInput.addEventListener('input', () => { if (!countdownInterval) updateCountdownDisplay(); });
        minutesInput.addEventListener('input', () => { if (!countdownInterval) updateCountdownDisplay(); });
        secondsInput.addEventListener('input', () => { if (!countdownInterval) updateCountdownDisplay(); });

        // Initial setup for countdown display
        // Calculate initial total seconds from default input values
        totalSecondsRemaining = (parseInt(hoursInput.value) || 0) * 3600 +
                                (parseInt(minutesInput.value) || 0) * 60 +
                                (parseInt(secondsInput.value) || 0);
        initialCountdownSeconds = totalSecondsRemaining; // Set initial for first reset
        updateCountdownDisplay();


        // --- Stopwatch Logic ---
        const stopwatchDisplay = document.getElementById('stopwatchDisplay');
        const stopwatchStartBtn = document.getElementById('stopwatchStartBtn');
        const stopwatchStopBtn = document.getElementById('stopwatchStopBtn');
        const stopwatchResetBtn = document.getElementById('stopwatchResetBtn');

        let stopwatchInterval;
        let startTime;
        let elapsedTime = 0; // Stores time in milliseconds

        function formatTime(ms) {
            const totalSeconds = Math.floor(ms / 1000);
            const cs = Math.floor((ms % 1000) / 10); // Centiseconds
            const h = Math.floor(totalSeconds / 3600);
            const m = Math.floor((totalSeconds % 3600) / 60);
            const s = totalSeconds % 60;
            return `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}.${String(cs).padStart(2, '0')}`;
        }

        function startStopwatch() {
            stopwatchStartBtn.disabled = true;
            stopwatchStopBtn.disabled = false;
            stopwatchResetBtn.disabled = false;

            startTime = Date.now() - elapsedTime; // Adjust startTime if resuming
            stopwatchInterval = setInterval(() => {
                elapsedTime = Date.now() - startTime;
                stopwatchDisplay.textContent = formatTime(elapsedTime);
            }, 10); // Update every 10 milliseconds for centiseconds
        }

        function stopStopwatch() {
            clearInterval(stopwatchInterval);
            stopwatchStartBtn.disabled = false;
            stopwatchStopBtn.disabled = true;
        }

        function resetStopwatch() {
            clearInterval(stopwatchInterval);
            elapsedTime = 0;
            stopwatchDisplay.textContent = formatTime(elapsedTime);
            stopwatchStartBtn.disabled = false;
            stopwatchStopBtn.disabled = true;
            stopwatchResetBtn.disabled = true;
        }

        stopwatchStartBtn.addEventListener('click', startStopwatch);
        stopwatchStopBtn.addEventListener('click', stopStopwatch);
        stopwatchResetBtn.addEventListener('click', resetStopwatch);

        // Initial mode setup
        switchMode('countdown'); // Default to countdown mode
    });
</script>